<!--
<copyright company="nhantinsoft.vn">
Author: Vũ Văn Văn
Created Date: 30/09/2017 13:08
</copyright>
-->
<div class='content-wrapper' ng-init="app.settings.pagetitle = 'Danh sách tài khoản quản trị';">
    <section class="box collapsed">
        <header class="panel_header">
            <h2 class="title pull-left">Tìm kiếm</h2>
            <div class="actions panel_actions pull-right">
                <i class="box_toggle material-icons">expand_less</i>
            </div>
        </header>
        <div class="content-body">
            <form name="searchForm">
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-4">
                        <div class="form-group">
                            <label class="form-label">Tên tài khoản</label>
                            <div class="controls">
                                <input type="text" class="form-control" data-ng-model="vm.Model.Name">
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-4">
                        <div class="form-group">
                            <label class="form-label">Họ tên</label>
                            <div class="controls">
                                <input type="text" class="form-control" data-ng-model="vm.Model.FullName">
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-4">
                        <div class="form-group">
                            <label class="form-label">Chức vụ</label>
                            <div class="controls">
                                <input type="text" class="form-control" data-ng-model="vm.Model.Role">
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-4">
                        <div class="form-group">
                            <label class="form-label">Nhóm quyền tài khoản</label>
                            <div class="controls">
                                <select class="form-control" data-ng-model="vm.Model.GroupId"
                                        data-ng-options="unit.GroupId as unit.Name for unit in vm.ListGroup">
                                    <option value="">&lt;&lt; Tất cả &gt;&gt;</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-4" style="display:none">
                        <div class="form-group">
                            <label class="form-label">Đơn vị quản lý</label>
                            <div class="controls">
                                <select class="form-control" data-ng-model="vm.Model.UnitId"
                                        data-ng-options="unit.Id as unit.Name for unit in vm.ListUnit">
                                    <option value="">&lt;&lt; Tất cả &gt;&gt;</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-4">
                        <div class="form-group">
                            <label class="form-label">Trạng thái</label>
                            <div class="controls">
                                <select class="form-control" data-ng-model="vm.Model.Status"
                                        data-ng-options="unit.Status as unit.StatusText for unit in vm.ListStatus">
                                    <option value="">&lt;&lt; Tất cả &gt;&gt;</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-4 text-right">
                        <button class="btn btn-success margin-top-15" ng-click="vm.FnSearch()">
                            <i class="fa fa-search"></i> &nbsp;<span>Tìm kiếm</span>
                        </button>
                        <button class="btn btn-default margin-top-15" ng-click="vm.FnClear()">
                            <i class="fa fa-refresh"></i> &nbsp;<span>Làm mới</span>
                        </button>
                    </div>
                    </div>
                <!--<div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-right">
                        
                    </div>
                </div>-->
            </form>
        </div>
    </section>
    <section class="box ">
        <header class="panel_header">
            <h2 class="title pull-left">Danh sách tài khoản quản trị</h2>
            <div class="actions panel_actions pull-right">
                <i class="box_toggle material-icons">expand_more</i>
            </div>
        </header>
        <div class="content-body">
            <div class="row margin-bottom-5">
                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 text-left">
                    <label class="form-label">Tổng số <span class="bold text-danger">{{totalItems}}</span> tài khoản</label>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 text-right">
                    <button type="button" class="btn btn-success" ui-sref="app.user-create">
                        <i class="fa fa-plus"></i> &nbsp;<span>Thêm mới</span>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <perfect-scrollbar wheel-propagation="true" suppress-scroll-y="true" min-scrollbar-length="20" class='ps-scrollbar'>
                        <table class="table table-bordered table-hover table-sorting" style="min-width:1200px">
                            <thead>
                                <tr ng-init="FnSearchPub = vm.FnSearch">
                                    <th width="50px" class="text-center">STT</th>
                                    <th width="150px">Xử lý</th>
                                    <th sort callback-fn="FnSearchPub({by:'Status',type:reverse})" width="120px">Trạng thái</th>
                                    
                                    <th width="50px">Ảnh</th>
                                    <th sort callback-fn="FnSearchPub({by:'Name',type:reverse})" width="130px">Tên tài khoản</th>
                                    <th sort callback-fn="FnSearchPub({by:'FullName',type:reverse})" width="160px">Họ tên</th>
                                    <th sort callback-fn="FnSearchPub({by:'PhoneNumber',type:reverse})" width="100px">Điện thoại</th>
                                    <th sort callback-fn="FnSearchPub({by:'GroupName',type:reverse})" width="180px">Nhóm quyền</th>
                                    <th sort callback-fn="FnSearchPub({by:'Role',type:reverse})" width="120px">Chức vụ</th>
                                    <th sort callback-fn="FnSearchPub({by:'UnitName',type:reverse})">Đơn vị quản lý</th>
                                    
                                    
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="row in vm.ListResult">
                                    <td class="text-center">{{StartIndex + ($index+1)}}</td>
                                    <td style="text-align:center">
                                        <button type="button" ng-click="vm.FnResetPass(row.UserId)" class="btn btn-sm btn-info" title="Đặt mật khẩu mặc định">
                                            <span class="fa fa-key" aria-hidden="true"></span>
                                        </button>
                                        <button type="button" ui-sref="app.user-update({id: row.UserId})" class="btn btn-sm btn-warning" title="Cập nhật">
                                            <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                                        </button>
                                        <button type="button" ng-click="vm.FnDelete(row.UserId)" class="btn btn-sm btn-danger" title="Xóa">
                                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                                        </button>
                                        <button type="button" ng-click="vm.FnUpdateStatusUser(row.UserId,row.Status)" class="btn btn-sm btn-default" title="{{row.Status==Common.Lock?'Kích hoạt':'Khóa'}}">
                                            <span ng-if="row.Status==Common.Lock" class="fa fa-unlock" aria-hidden="true"></span>
                                            <span ng-if="row.Status==Common.UnLock" class="fa fa-lock" aria-hidden="true"></span>
                                        </button>
                                    </td>
                                    <td class="text-center"><span class="badge {{row.Status==Common.UnLock?'badge-success':'badge-danger'}}">{{row.Status==Common.UnLock?Common.UnLockText:Common.LockText}}</span></td>
                                    
                                    <td><img ng-if="row.ImageLink!=''" ng-src="{{row.ImageLink}}" style="max-height:40px;max-width:40px;" /></td>
                                    <td><a ui-sref="app.user-update({id: row.UserId})">{{row.Name}}</a></td>
                                    <td><a ui-sref="app.log-list({id: row.UserId})" target="_blank">{{row.FullName}}</a></td>
                                    <td>{{row.PhoneNumber}}</td>
                                    <td>{{row.GroupName}}</td>
                                    <td>{{row.Role}}</td>
                                    <td>{{row.UnitName}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </perfect-scrollbar>
                </div>
            </div>
            <div class="row" >
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 ">
                    <span class="form-label-custom">
                        Số bản ghi/trang:
                    </span>
                    <select style="width:120px" class="form-control" data-ng-model="vm.Model.PageSize" data-ng-options="unit.Id as unit.Name for unit in vm.ListPageSize" ng-change="vm.FnSearch()"></select>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 " ng-show="totalItems>vm.Model.PageSize">
                    <pagination ng-change="vm.FnSearch()" total-items="totalItems" ng-model="currentPage" max-size="maxSize" class="pagination-sm" boundary-links="true" items-per-page="vm.Model.PageSize"></pagination>
                </div>
                <!--<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
                    <pagination ng-change="vm.FnSearch()" total-items="totalItems" ng-model="currentPage" max-size="maxSize" class="pagination-sm" boundary-links="true" items-per-page="numPerPage"></pagination>
                </div>-->
            </div>
            <hr class="margin-top-10; margin-bottom-10" />
            <div class="row">
                <div class="col-md-12">
                    <button class="btn btn-view btn-info"><i class="fa fa-key"></i></button>&nbsp;<small class="padding-right-20">Cài đặt lại mật khẩu mặc định</small>
                    <button class="btn btn-view btn-warning"><i class="fa fa-edit"></i></button>&nbsp;<small class="padding-right-20">Cập nhật tài khoản</small>
                    <button class="btn btn-view btn-danger"><i class="fa fa-remove"></i></button>&nbsp;<small class="padding-right-20">Xóa tài khoản</small>
                    <button class="btn btn-view btn-default"><i class="fa fa-unlock"></i></button>&nbsp;<small class="padding-right-20">Kích hoạt tài khoản</small>
                    <button class="btn btn-view btn-default"><i class="fa fa-lock"></i></button>&nbsp;<small class="padding-right-20">Khóa tài khoản</small>
                </div>
            </div>
        </div>
    </section>
</div>
